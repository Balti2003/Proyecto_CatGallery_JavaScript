(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const d="https://api.thecatapi.com/v1",C=async(e=9,t="")=>{try{const n=t?`${d}/images/search?limit=${e}&breed_ids=${t}&size=small`:`${d}/images/search?limit=${e}&size=small`,s=await fetch(n);if(!s.ok)throw new Error("Error al obtener gatos");return await s.json()}catch(n){throw console.error(n),n}},L=async()=>{try{const e=await fetch(`${d}/breeds`);if(!e.ok)throw new Error("Error al obtener razas");return await e.json()}catch(e){throw console.error(e),e}},m="favorites",i=()=>JSON.parse(localStorage.getItem(m))||[],b=e=>{const t=i();t.find(n=>n.url===e.url)||localStorage.setItem(m,JSON.stringify([...t,e]))},h=e=>{const t=i().filter(n=>n.url!==e);localStorage.setItem(m,JSON.stringify(t))},v=(e,t)=>{t.innerHTML="";const n=i();e.forEach(s=>{const r=document.createElement("div");r.classList.add("card");const o=document.createElement("img");o.src=s.url,o.alt="Gato",o.loading="lazy";const a=document.createElement("button"),p=n.some(E=>E.url===s.url);a.textContent=p?"❌ Quitar":"❤️ Favorito",a.addEventListener("click",()=>{p?h(s.url):b(s),f(document.getElementById("favorites")),v(e,t)}),r.appendChild(o),r.appendChild(a),t.appendChild(r)})},f=e=>{const t=i();if(e.innerHTML="",t.length===0){e.innerHTML="<p>No tienes favoritos</p>";return}t.forEach(n=>{const s=document.createElement("div");s.classList.add("card");const r=document.createElement("img");r.src=n.url,r.alt="Gato favorito";const o=document.createElement("button");o.textContent="❌ Quitar",o.addEventListener("click",()=>{h(n.url),f(e)}),s.appendChild(r),s.appendChild(o),e.appendChild(s)})},l=e=>{const t=document.getElementById("status");t.textContent=e},w=document.getElementById("cat-gallery"),O=document.getElementById("favorites"),I=document.getElementById("load-more"),u=document.getElementById("breed-select");let c=[],y="";const g=async(e=!1)=>{try{l("Cargando...");const t=await C(6,y||"");c=e?t:[...c,...t],v(c,w),l("")}catch(t){console.error(t),l("⚠️ Error al cargar gatos")}},S=async()=>{try{(await L()).forEach(t=>{const n=document.createElement("option");n.value=t.id,n.textContent=t.name,u.appendChild(n)})}catch(e){console.error("Error cargando razas",e)}};document.addEventListener("DOMContentLoaded",()=>{g(),S(),f(O)});I.addEventListener("click",()=>g());u.addEventListener("change",()=>{y=u.value,c=[],g(!0)});
